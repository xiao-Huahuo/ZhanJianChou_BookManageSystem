<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>图书管理系统 - 图书列表</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <script src="translations.js"></script>
<script src="global.js"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            primary: '#81C784',
            secondary: '#A5D6A7',
            tertiary: '#C8E6C9',
            accent: '#4CAF50',
            neutral: '#F1F8E9',
          },
          fontFamily: {
            sans: ['Inter', 'system-ui', 'sans-serif'],
          },
        },
      }
    }
  </script>
  <style type="text/tailwindcss">
    @layer utilities {
      .content-auto { content-visibility: auto; }
      .text-shadow { text-shadow: 0 2px 4px rgba(0,0,0,0.1); }
      .card-hover { transition: all 0.3s ease; }
      .card-hover:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
      }
      .sidebar-item { @apply flex items-center gap-3 px-4 py-3 rounded-lg transition-all duration-200; }
      .sidebar-item.active { @apply bg-primary/20 text-accent font-medium dark:bg-primary/30 dark:text-white; }
      .sidebar-item:hover:not(.active) { @apply bg-gray-100 dark:bg-gray-700; }
      .input-focus { @apply focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all duration-200; }
      .btn-primary { @apply bg-primary hover:bg-accent text-white font-medium py-2 px-4 rounded-lg transition-all duration-200 shadow-md hover:shadow-lg transform hover:-translate-y-0.5; }
      .btn-outline-primary { @apply bg-transparent border border-primary text-primary hover:bg-primary hover:text-white font-medium py-2 px-4 rounded-lg transition-all duration-200 dark:text-secondary dark:border-secondary dark:hover:bg-secondary dark:hover:text-gray-900; }
      .btn-secondary { @apply bg-gray-300 text-gray-600 font-medium py-2 px-4 rounded-lg cursor-not-allowed; }
      .btn-collected { @apply bg-gray-200 text-gray-500 font-medium py-2 px-4 rounded-lg cursor-not-allowed; }
      
      /* --- AI CHAT BUTTON STYLE START --- */
      .btn-ai { @apply bg-transparent border border-purple-400 text-purple-500 hover:bg-purple-400 hover:text-white font-medium py-2 px-4 rounded-lg transition-all duration-200 dark:text-purple-300 dark:border-purple-300 dark:hover:bg-purple-400 dark:hover:text-gray-900 flex items-center gap-2; }
      /* --- AI CHAT BUTTON STYLE END --- */
    }
  </style>
  <style>
    #background-slideshow {
        background-image: url('images/background1.jpg');
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        transition: background-image 1s ease-in-out;
        filter: brightness(85%);
        position: fixed;
        inset: 0;
        z-index: -1;
    }
    body { background-color: transparent; }
    aside, main, header {
        background-color: rgba(255, 255, 255, 0.3);
        position: relative;
        z-index: 1;
    }
    .dark #background-slideshow { filter: brightness(60%); }
    .dark body { background-color: transparent; }
    .dark aside, .dark main, .dark header { background-color: rgba(31, 41, 55, 0.3); }
    .dark .bg-white { background-color: rgba(31, 41, 55, 0.7); }
  </style>
</head>
<body class="font-sans text-gray-800 dark:text-gray-200">

  <div id="background-slideshow"></div>

  <script>
    (function() {
      const currentUser = sessionStorage.getItem('currentUser');
      if (!currentUser) {
        alert('请先登录！');
        window.location.href = 'login.html';
      }
    })();
  </script>

  <div id="user-dashboard" class="min-h-screen flex flex-col">
    <header class="shadow-sm sticky top-0 z-50">
        <div class="flex items-center justify-between px-4 sm:px-6 lg:px-8 py-3">
            <div class="flex items-center space-x-2">
              <button id="sidebar-toggle" class="lg:hidden text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white">
                <i class="fa fa-bars text-xl"></i>
              </button>
              <div class="flex items-center">
                <i class="fa fa-book text-primary text-2xl mr-2"></i>
                <h1 class="text-xl font-bold text-gray-900 dark:text-white">图书管理系统</h1>
              </div>
            </div>
            <div class="flex items-center space-x-4">
              <div class="relative">
                <button class="p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 relative">
                  <i class="fa fa-bell-o text-gray-500 dark:text-gray-400"></i>
                  <span class="absolute top-1 right-1 h-2 w-2 rounded-full bg-red-500"></span>
                </button>
              </div>
              <div class="flex items-center space-x-3">
                <img src="https://picsum.photos/id/1005/40/40" alt="用户头像" class="h-8 w-8 rounded-full object-cover">
                <div class="hidden md:block">
                  <p id="user-name-display" class="text-sm font-medium text-gray-700 dark:text-gray-300"></p>
                  <p id="user-role-display" class="text-xs text-gray-500 dark:text-gray-400"></p>
                </div>
                <button id="logout-btn" class="text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white">
                  <i class="fa fa-sign-out"></i>
                </button>
              </div>
            </div>
          </div>
    </header>

    <div class="flex flex-1 overflow-hidden">
        <aside id="sidebar" class="w-64 shadow-md transform -translate-x-full lg:translate-x-0 fixed lg:static h-[calc(100vh-64px)] z-40 transition-transform duration-300 ease-in-out">
            <div class="flex flex-col h-full">
              <nav class="flex-1 px-4 py-6 space-y-1 overflow-y-auto">
                <div class="px-4 py-2 mb-4">
                  <h2 class="text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider">主菜单</h2>
                </div>
                <a href="user-page.html" class="sidebar-item">
                  <i class="fa fa-home text-lg"></i>
                  <span>首页</span>
                </a>
                <a href="book_list.html" class="sidebar-item active">
                  <i class="fa fa-book text-lg"></i>
                  <span>图书列表</span>
                </a>
                <a href="my_borrowings.html" class="sidebar-item">
                  <i class="fa fa-calendar-check-o text-lg"></i>
                  <span>我的借阅</span>
                </a>
                <a href="my_collections.html" class="sidebar-item">
                  <i class="fa fa-star-o text-lg"></i>
                  <span>我的收藏</span>
                </a>
                <a href="borrowing_history.html" class="sidebar-item">
                  <i class="fa fa-clock-o text-lg"></i>
                  <span>借阅历史</span>
                </a>
                <div class="px-4 py-2 mt-6 mb-4">
                  <h2 class="text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider">设置</h2>
                </div>
                <a href="personal_info.html" class="sidebar-item">
                  <i class="fa fa-user-o text-lg"></i>
                  <span>个人信息</span>
                </a>
                <a href="system_settings.html" class="sidebar-item">
                  <i class="fa fa-cog text-lg"></i>
                  <span>系统设置</span>
                </a>
              </nav>
            </div>
        </aside>

      <main class="flex-1 overflow-y-auto p-4 sm:p-6 lg:p-8">
        <div class="mb-8">
          <h2 class="text-[clamp(1.5rem,3vw,2.5rem)] font-bold text-gray-900 dark:text-white">图书列表</h2>
          <p class="text-gray-600 dark:text-gray-400">浏览可供借阅的图书。</p>
        </div>

        <div class="bg-white rounded-xl shadow-sm p-6 mb-8 flex flex-col md:flex-row items-center gap-4">
          <input type="text" id="search-input" placeholder="搜索书籍、作者..." class="flex-1 px-4 py-2 border border-gray-300 rounded-lg input-focus bg-transparent">
          <select id="category-select" class="px-4 py-2 border border-gray-300 rounded-lg bg-transparent">
            <option value="所有分类">所有分类</option>
            <option value="文学">文学</option>
            <option value="历史">历史</option>
            <option value="科学">科学</option>
            <option value="小说">小说</option>
            <option value="哲学">哲学</option>
            <option value="计算机">计算机</option>
            <option value="艺术">艺术</option>
            <option value="心理学">心理学</option>
          </select>
          <button id="search-button" class="btn-primary">搜索</button>
        </div>

        <div id="book-list-container" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
          </div>
      </main>
    </div>
  </div>

  <div id="ai-chat-dialog" class="hidden fixed bottom-5 right-5 w-96 h-[60vh] flex flex-col bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-xl shadow-2xl z-[100]">
    <div class="flex items-center justify-between p-3 border-b border-gray-300 dark:border-gray-600">
        <div class="flex items-center gap-2">
            <i class="fa fa-comments-o text-purple-500"></i>
            <h3 id="ai-chat-title" class="font-bold text-gray-800 dark:text-white truncate">AI 助手</h3>
        </div>
        <button id="ai-chat-close-btn" class="text-gray-500 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white">
            <i class="fa fa-times"></i>
        </button>
    </div>
    <div id="ai-chat-messages" class="flex-1 p-4 overflow-y-auto space-y-4">
        </div>
    <div class="p-3 border-t border-gray-300 dark:border-gray-600">
        <div class="flex items-center gap-2">
            <input type="text" id="ai-chat-input" placeholder="询问关于本书..." class="flex-1 px-3 py-2 border border-gray-300 rounded-lg input-focus bg-transparent text-sm">
            <button id="ai-chat-send-btn" class="btn-primary" style="background-color: #a855f7; --tw-shadow: 0 0 #0000; --tw-shadow-colored: 0 0 #0000;">
                <i class="fa fa-paper-plane"></i>
            </button>
        </div>
    </div>
  </div>
  <script>
    // The initial book data remains unchanged.
  const books = [
      { id: 1, title: '《明朝那些事儿》', author: '当年明月', isbn: '978-7-5404-3705-7', description: '以史料为基础，以小说笔法，对明朝十七帝和其他人物进行解读。', image: 'https://picsum.photos/id/237/400/300', status: 'available', category: '历史' },
      { id: 2, title: '《活着》', author: '余华', isbn: '978-7-5327-7756-7', description: '讲述了中国农民福贵悲惨而又充满韧性的一生。', image: 'https://picsum.photos/id/238/400/300', status: 'borrowed', category: '文学' },
      { id: 3, title: '《哈利·波特与魔法石》', author: 'J.K. 罗琳', isbn: '978-7-02-003333-3', description: '全球畅销的奇幻文学系列第一部，开启魔法世界的冒险。', image: 'https://picsum.photos/id/239/400/300', status: 'available', category: '小说' },
      { id: 4, title: '《围城》', author: '钱钟书', isbn: '978-7-02-002672-0', description: '钱钟书先生的讽刺小说，被誉为“新儒林外史”。', image: 'https://picsum.photos/id/240/400/300', status: 'borrowed', category: '文学' },
      { id: 5, title: '《三体》', author: '刘慈欣', isbn: '978-7-5366-9293-0', description: '中国科幻文学的里程碑之作，探讨宇宙社会学。', image: 'https://picsum.photos/id/241/400/300', status: 'available', category: '科学' },
      { id: 6, title: '《百年孤独》', author: '加西亚·马尔克斯', isbn: '978-7-5327-7278-4', description: '魔幻现实主义的代表作，讲述布恩迪亚家族的兴衰。', image: 'https://picsum.photos/id/242/400/300', status: 'borrowed', category: '文学' },
      { id: 7, title: '《人类简史：从动物到上帝》', author: '尤瓦尔·赫拉利', isbn: '978-7-5339-4402-9', description: '一本关于人类历史的宏大叙事，从认知革命到科学革命。', image: 'https://picsum.photos/id/243/400/300', status: 'available', category: '历史' },
      { id: 8, title: '《小王子》', author: '安托万·德·圣-埃克苏佩里', isbn: '978-7-5327-7757-4', description: '一部充满哲理的童话，献给所有曾经是孩子的大人。', image: 'https://picsum.photos/id/244/400/300', status: 'available', category: '文学' },
      { id: 9, title: '《1984》', author: '乔治·奥威尔', isbn: '978-7-5447-0624-9', description: '反乌托邦的经典之作，描绘了一个极权主义社会。', image: 'https://picsum.photos/id/245/400/300', status: 'borrowed', category: '小说' },
      { id: 10, title: '《月亮与六便士》', author: '毛姆', isbn: '978-7-5327-7758-1', description: '讲述了一个中年男人放弃一切去追求艺术的传奇故事。', image: 'https://picsum.photos/id/246/400/300', status: 'available', category: '文学' },
      { id: 11, title: '《红楼梦》', author: '曹雪芹', isbn: '978-7-02-000220-4', description: '中国古典四大名著之一，展现了封建社会的百科全书。', image: 'https://picsum.photos/id/247/400/300', status: 'available', category: '文学' },
      { id: 12, title: '《傲慢与偏见》', author: '简·奥斯汀', isbn: '978-7-5447-0625-6', description: '英国文学史上的经典爱情小说，探讨爱情、婚姻与社会阶层。', image: 'https://picsum.photos/id/248/400/300', status: 'borrowed', category: '文学' },
      { id: 13, title: '《乌合之众：大众心理研究》', author: '古斯塔夫·勒庞', isbn: '978-7-5327-7759-8', description: '一部对群体心理学进行深入分析的著作，影响深远。', image: 'https://picsum.photos/id/249/400/300', status: 'available', category: '心理学' },
      { id: 14, title: '《影响力》', author: '罗伯特·西奥迪尼', isbn: '978-7-111-20993-2', description: '心理学经典，揭示了说服和影响他人的六种基本原则。', image: 'https://picsum.photos/id/250/400/300', status: 'available', category: '心理学' },
      { id: 15, title: '《编码：隐匿在计算机软硬件背后的语言》', author: '查尔斯·佩措尔德', isbn: '978-7-115-38507-6', description: '从电报到计算机，用通俗易懂的语言讲述编码的历史与原理。', image: 'https://picsum.photos/id/251/400/300', status: 'available', category: '计算机' },
      { id: 16, title: '《万物简史》', author: '比尔·布莱森', isbn: '978-7-5327-7760-4', description: '一部关于科学知识的百科全书，以幽默的笔触讲述宇宙万物。', image: 'https://picsum.photos/id/252/400/300', status: 'available', category: '科学' },
      { id: 17, title: '《禅与摩托车维修艺术》', author: '罗伯特·M·波西格', isbn: '978-7-5327-7761-1', description: '一部哲学小说，探讨了生活的意义和品质。', image: 'https://picsum.photos/id/253/400/300', status: 'borrowed', category: '哲学' },
      { id: 18, title: '《艺术的故事》', author: 'E.H.贡布里希', isbn: '978-7-5327-7762-8', description: '西方艺术史的经典入门读物，涵盖从史前到现代的艺术发展。', image: 'https://picsum.photos/id/254/400/300', status: 'available', category: '艺术' },
      { id: 19, title: '《苏菲的世界》', author: '乔斯坦·贾德', isbn: '978-7-5327-7763-5', description: '一部以小说形式介绍西方哲学史的普及读物。', image: 'https://picsum.photos/id/255/400/300', status: 'available', category: '哲学' },
      { id: 20, title: '《JavaScript高级程序设计》', author: 'Nicholas C. Zakas', isbn: '978-7-115-40398-5', description: 'JavaScript领域的权威指南，深入讲解语言核心和Web API。', image: 'https://picsum.photos/id/256/400/300', status: 'available', category: '计算机' },
      { id: 21, title: '《未来简史》', author: '尤瓦尔·赫拉利', isbn: '978-7-5339-4403-6', description: '探讨了未来人类将如何演化以及面临的挑战。', image: 'https://picsum.photos/id/257/400/300', status: 'available', category: '历史' },
      { id: 22, title: '《乡土中国》', author: '费孝通', isbn: '978-7-5327-7764-2', description: '对中国传统社会结构和文化进行了深刻剖析。', image: 'https://picsum.photos/id/258/400/300', status: 'borrowed', category: '历史' },
      { id: 23, title: '《哥德尔、艾舍尔、巴赫：集异璧之大成》', author: '侯世达', isbn: '978-7-5327-7765-9', description: '一本探讨数学、艺术和人工智能之间深层联系的巨著。', image: 'https://picsum.photos/id/259/400/300', status: 'available', category: '科学' },
      { id: 24, title: '《物种起源》', author: '查尔斯·达尔文', isbn: '978-7-5327-7766-6', description: '阐述自然选择理论，生物进化的奠基之作。', image: 'https://picsum.photos/id/260/400/300', status: 'available', category: '科学' },
      { id: 25, title: '《梦的解析》', author: '西格蒙德·弗洛伊德', isbn: '978-7-5327-7767-3', description: '精神分析学的开山之作，探索梦的奥秘。', image: 'https://picsum.photos/id/261/400/300', status: 'borrowed', category: '心理学' },
      { id: 26, title: '《追风筝的人》', author: '卡勒德·胡赛尼', isbn: '978-7-5327-7768-0', description: '讲述了阿富汗一对好友的成长与救赎的故事。', image: 'https://picsum.photos/id/262/400/300', status: 'available', category: '小说' },
      { id: 27, title: '《杀死一只知更鸟》', author: '哈珀·李', isbn: '978-7-5447-0626-3', description: '一部关于种族歧视和正义的经典小说。', image: 'https://picsum.photos/id/263/400/300', status: 'available', category: '小说' },
      { id: 28, title: '《高效能人士的七个习惯》', author: '史蒂芬·柯维', isbn: '978-7-5086-4528-9', description: '全球畅销的个人成长和领导力指南。', image: 'https://picsum.photos/id/264/400/300', status: 'available', category: '心理学' },
      { id: 29, title: '《非暴力沟通》', author: '马歇尔·卢森堡', isbn: '978-7-5086-5867-8', description: ' teaches people how to express themselves without violence. teaches empathy skills. It is an exploration of the principles of human behavior.', image: 'https://picsum.photos/id/265/400/300', status: 'available', category: '心理学' },
      { id: 30, title: '《算法导论》', author: '托马斯·科尔曼', isbn: '978-7-111-20994-9', description: '计算机科学领域的经典教材，深入讲解各种算法。', image: 'https://picsum.photos/id/266/400/300', status: 'borrowed', category: '计算机' },
      { id: 31, title: '《设计模式》', author: '埃里希·伽玛等', isbn: '978-7-115-38508-3', description: '软件设计领域的经典，GoF的23种设计模式。', image: 'https://picsum.photos/id/267/400/300', status: 'available', category: '计算机' },
      { id: 32, title: '《中国哲学史》', author: '冯友兰', isbn: '978-7-5327-7769-7', description: '系统阐述中国哲学思想的发展脉络。', image: 'https://picsum.photos/id/268/400/300', status: 'available', category: '哲学' },
      { id: 33, title: '《理想国》', author: '柏拉图', isbn: '978-7-5327-7770-3', description: '西方哲学经典，探讨理想国家和社会。', image: 'https://picsum.photos/id/269/400/300', status: 'available', category: '哲学' },
      { id: 34, title: '《西方哲学史》', author: '伯特兰·罗素', isbn: '978-7-5327-7771-0', description: '罗素对西方哲学历史的个人解读。', image: 'https://picsum.photos/id/270/400/300', status: 'borrowed', category: '哲学' },
      { id: 35, title: '《美的历史》', author: '翁贝托·艾柯', isbn: '978-7-5327-7772-7', description: '艾柯以插图形式呈现西方美学概念的演变。', image: 'https://picsum.photos/id/271/400/300', status: 'available', category: '艺术' },
      { id: 36, title: '《艺术与幻觉》', author: 'E.H.贡布里希', isbn: '978-7-5327-7773-4', description: '探讨艺术中的再现与心理学。', image: 'https://picsum.photos/id/272/400/300', status: 'available', category: '艺术' },
      { id: 37, title: '《菊与刀》', author: '鲁思·本尼迪克特', isbn: '978-7-5327-7774-1', description: '二战后对日本民族性格的经典分析。', image: 'https://picsum.photos/id/273/400/300', status: 'available', category: '历史' },
      { id: 38, title: '《枪炮、病菌与钢铁》', author: '贾雷德·戴蒙德', isbn: '978-7-5327-7775-8', description: '解释人类社会发展差异的地理和环境因素。', image: 'https://picsum.photos/id/274/400/300', status: 'available', category: '历史' },
      { id: 39, title: '《自私的基因》', author: '理查德·道金斯', isbn: '978-7-5327-7776-5', description: '普及进化论和基因中心观点的经典。', image: 'https://picsum.photos/id/275/400/300', status: 'borrowed', category: '科学' },
      { id: 40, title: '《时间简史》', author: '史蒂芬·霍金', isbn: '978-7-5327-7777-2', description: '解释宇宙起源和命运的科普巨著。', image: 'https://picsum.photos/id/276/400/300', status: 'available', category: '科学' },
      { id: 41, title: '《心理学与生活》', author: '理查德·格里格', isbn: '978-7-5086-4529-6', description: '心理学入门经典教材。', image: 'https://picsum.photos/id/277/400/300', status: 'available', category: '心理学' },
      { id: 42, title: '《社会心理学》', author: '戴维·迈尔斯', isbn: '978-7-5086-5868-5', description: '社会心理学领域的权威教材。', image: 'https://picsum.photos/id/278/400/300', status: 'available', category: '心理学' },
      { id: 43, title: '《颈椎病康复指南》', author: '李华', isbn: '978-7-111-20995-6', description: '关于颈椎病预防和康复的实用指南。', image: 'https://picsum.photos/id/279/400/300', status: 'available', category: '科学' },
      { id: 44, title: '《编程珠玑》', author: '乔恩·本特利', isbn: '978-7-115-38509-0', description: '提高编程技巧和思维的经典。', image: 'https://picsum.photos/id/280/400/300', status: 'borrowed', category: '计算机' },
      { id: 45, title: '《算法之美》', author: '吴军', isbn: '978-7-115-40399-2', description: '用通俗易懂的语言讲述算法的魅力。', image: 'https://picsum.photos/id/281/400/300', status: 'available', category: '计算机' },
      { id: 46, title: '《道德经》', author: '老子', isbn: '978-7-5327-7778-9', description: '道家思想的经典著作。', image: 'https://picsum.photos/id/282/400/300', status: 'available', category: '哲学' },
      { id: 47, title: '《论语》', author: '孔子', isbn: '978-7-02-000221-1', description: '儒家思想的核心经典。', image: 'https://picsum.photos/id/283/400/300', status: 'available', category: '哲学' },
      { id: 48, title: '《孙子兵法》', author: '孙武', isbn: '978-7-02-000222-8', description: '中国古代军事理论经典。', image: 'https://picsum.photos/id/284/400/300', status: 'available', category: '历史' },
      { id: 49, title: '《中国通史》', author: '吕思勉', isbn: '978-7-5327-7779-6', description: '简明扼要的中国历史概览。', image: 'https://picsum.photos/id/285/400/300', status: 'borrowed', category: '历史' },
      { id: 50, title: '《世界文明史》', author: '威尔·杜兰', isbn: '978-7-5327-7780-2', description: '涵盖人类文明发展历程的巨著。', image: 'https://picsum.photos/id/286/400/300', status: 'available', category: '历史' },
      { id: 51, title: '《数学之美》', author: '吴军', isbn: '978-7-115-40400-5', description: '用生动的故事讲述数学的奥秘。', image: 'https://picsum.photos/id/287/400/300', status: 'available', category: '科学' },
      { id: 52, title: '《物理世界奇遇记》', author: '乔治·伽莫夫', isbn: '978-7-5327-7781-9', description: '科普物理学基础知识的经典。', image: 'https://picsum.photos/id/288/400/300', status: 'available', category: '科学' },
      { id: 53, title: '《认知心理学》', author: '约翰·安德森', isbn: '978-7-5086-4530-2', description: '认知心理学领域的权威教材。', image: 'https://picsum.photos/id/289/400/300', status: 'borrowed', category: '心理学' },
      { id: 54, title: '《津巴多普通心理学》', author: '菲利普·津巴多', isbn: '978-7-5086-5869-2', description: '心理学入门的经典教材。', image: 'https://picsum.photos/id/290/400/300', status: 'available', category: '心理学' },
      { id: 55, title: '《Effective Java》', author: 'Joshua Bloch', isbn: '978-7-111-20996-3', description: 'Java编程的实践指南。', image: 'https://picsum.photos/id/291/400/300', status: 'available', category: '计算机' },
      { id: 56, title: '《深入理解计算机系统》', author: 'Randal E. Bryant', isbn: '978-7-111-20997-0', description: '理解计算机底层工作原理的经典。', image: 'https://picsum.photos/id/292/400/300', status: 'available', category: '计算机' },
      { id: 57, title: '《黑客与画家》', author: '保罗·格雷厄姆', isbn: '978-7-5327-7782-6', description: '关于编程、创业和互联网文化的文集。', image: 'https://picsum.photos/id/293/400/300', status: 'available', category: '计算机' },
      { id: 58, title: '《JavaScript高级编程》', author: 'Nicholas C. Zakas', isbn: '978-7-115-40401-2', description: 'JavaScript的进阶学习指南。', image: 'https://picsum.photos/id/294/400/300', status: 'available', category: '计算机' },
      { id: 59, title: '《C++ Primer》', author: 'Stanley B. Lippman', isbn: '978-7-111-20998-7', description: 'C++编程语言的权威教材。', image: 'https://picsum.photos/id/295/400/300', status: 'borrowed', category: '计算机' },
      { id: 60, title: '《Python编程从入门到实践》', author: 'Eric Matthes', isbn: '978-7-115-40402-9', description: 'Python编程的入门书籍。', image: 'https://picsum.photos/id/296/400/300', status: 'available', category: '计算机' },
      { id: 61, title: '《数据结构与算法分析》', author: 'Mark Allen Weiss', isbn: '978-7-111-20999-4', description: '经典的数据结构与算法教材。', image: 'https://picsum.photos/id/297/400/300', status: 'available', category: '计算机' },
      { id: 62, title: '《计算机网络：自顶向下方法》', author: 'James F. Kurose', isbn: '978-7-111-21000-7', description: '计算机网络领域的经典教材。', image: 'https://picsum.photos/id/298/400/300', status: 'available', category: '计算机' },
      { id: 63, title: '《操作系统：精髓与设计原理》', author: 'William Stallings', isbn: '978-7-111-21001-4', description: '深入理解操作系统原理。', image: 'https://picsum.photos/id/299/400/300', status: 'borrowed', category: '计算机' },
      { id: 64, title: '《数据库系统概念》', author: 'Abraham Silberschatz', isbn: '978-7-111-21002-1', description: '数据库领域的权威教材。', image: 'https://picsum.photos/id/300/400/300', status: 'available', category: '计算机' },
      { id: 65, title: '《深入浅出设计模式》', author: 'Elisabeth Freeman', isbn: '978-7-115-40403-6', description: '通过生动有趣的方式讲解设计模式。', image: 'https://picsum.photos/id/301/400/300', status: 'available', category: '计算机' },
      { id: 66, title: '《代码大全》', author: 'Steve McConnell', isbn: '978-7-115-40404-3', description: '软件构建的百科全书。', image: 'https://picsum.photos/id/302/400/300', status: 'available', category: '计算机' },
      { id: 67, title: '《重构：改善既有代码的设计》', author: 'Martin Fowler', isbn: '978-7-115-40405-0', description: '软件重构的经典著作。', image: 'https://picsum.photos/id/303/400/300', status: 'borrowed', category: '计算机' },
      { id: 68, title: '《 Clean Code 》', author: 'Robert C. Martin', isbn: '978-7-115-40406-7', description: '关于编写可读、可维护代码的实践。', image: 'https://picsum.photos/id/304/400/300', status: 'available', category: '计算机' },
      { id: 69, title: '《The Pragmatic Programmer》', author: 'Andrew Hunt', isbn: '978-7-115-40407-4', description: '程序员的修炼之道。', image: 'https://picsum.photos/id/305/400/300', status: 'available', category: '计算机' },
      { id: 70, title: '《Head First Java》', author: 'Kathy Sierra', isbn: '978-7-115-40408-1', description: 'Java编程的入门和实践。', image: 'https://picsum.photos/id/306/400/300', status: 'available', category: '计算机' },
      { id: 71, title: '《HTML和CSS设计与构建网站》', author: 'Jon Duckett', isbn: '978-7-115-40409-8', description: 'Web前端开发的入门书籍。', image: 'https://picsum.photos/id/307/400/300', status: 'available', category: '计算机' },
      { id: 72, title: '《你不知道的JavaScript》', author: 'Kyle Simpson', isbn: '978-7-115-40410-4', description: '深入理解JavaScript语言。', image: 'https://picsum.photos/id/308/400/300', status: 'borrowed', category: '计算机' },
      { id: 73, title: '《Vue.js实战》', author: '梁灏', isbn: '978-7-115-40411-1', description: 'Vue.js前端框架的实战指南。', image: 'https://picsum.photos/id/309/400/300', status: 'available', category: '计算机' },
      { id: 74, title: '《React小书》', author: '程墨', isbn: '978-7-115-40412-8', description: 'React前端框架的入门书籍。', image: 'https://picsum.photos/id/310/400/300', status: 'available', category: '计算机' },
      { id: 75, title: '《Angular权威指南》', author: 'Jeffrey Richter', isbn: '978-7-115-40413-5', description: 'Angular前端框架的权威指南。', image: 'https://picsum.photos/id/311/400/300', status: 'available', category: '计算机' },
      { id: 76, title: '《Node.js开发实战》', author: '桑世龙', isbn: '978-7-115-40414-2', description: 'Node.js后端开发的实战指南。', image: 'https://picsum.photos/id/312/400/300', status: 'available', category: '计算机' },
      { id: 77, title: '《深入浅出Node.js》', author: '朴灵', isbn: '978-7-115-40415-9', description: '深入理解Node.js的原理与实践。', image: 'https://picsum.photos/id/313/400/300', status: 'borrowed', category: '计算机' },
      { id: 78, title: '《MongoDB权威指南》', author: 'Kristina Chodorow', isbn: '978-7-115-40416-6', description: 'MongoDB数据库的权威指南。', image: 'https://picsum.photos/id/314/400/300', status: 'available', category: '计算机' },
      { id: 79, title: '《Redis设计与实现》', author: '黄健宏', isbn: '978-7-115-40417-3', description: 'Redis数据库的内部实现原理。', image: 'https://picsum.photos/id/315/400/300', status: 'available', category: '计算机' },
      { id: 80, title: '《Docker从入门到实践》', author: 'DaoCloud', isbn: '978-7-115-40418-0', description: 'Docker容器技术的入门与实践。', image: 'https://picsum.photos/id/316/400/300', status: 'available', category: '计算机' },
      { id: 81, title: '《Kubernetes权威指南》', author: '龚正', isbn: '978-7-115-40419-7', description: 'Kubernetes容器编排的权威指南。', image: 'https://picsum.photos/id/317/400/300', status: 'available', category: '计算机' },
      { id: 82, title: '《微服务设计》', author: 'Sam Newman', isbn: '978-7-115-40420-3', description: '微服务架构的设计原则与实践。', image: 'https://picsum.photos/id/318/400/300', status: 'borrowed', category: '计算机' },
      { id: 83, title: '《领域驱动设计》', author: 'Eric Evans', isbn: '978-7-115-40421-0', description: 'DDD的经典著作。', image: 'https://picsum.photos/id/319/400/300', status: 'available', category: '计算机' },
      { id: 84, title: '《架构整洁之道》', author: 'Robert C. Martin', isbn: '978-7-115-40422-7', description: '软件架构设计的原则与实践。', image: 'https://picsum.photos/id/320/400/300', status: 'available', category: '计算机' },
      { id: 85, title: '《人月神话》', author: 'Fred Brooks', isbn: '978-7-115-40423-4', description: '软件工程的经典著作。', image: 'https://picsum.photos/id/321/400/300', status: 'available', category: '计算机' },
      { id: 86, title: '《浪潮之巅》', author: '吴军', isbn: '978-7-115-40424-1', description: '讲述IT产业发展的历史和规律。', image: 'https://picsum.photos/id/322/400/300', status: 'available', category: '计算机' },
      { id: 87, title: '《软技能：代码之外的生存指南》', author: 'John Sonmez', isbn: '978-7-115-40425-8', description: '程序员职业发展和个人成长。', image: 'https://picsum.photos/id/323/400/300', status: 'borrowed', category: '计算机' },
      { id: 88, title: '《编码的奥秘》', author: '查尔斯·佩措尔德', isbn: '978-7-115-40426-5', description: '深入浅出地讲解编码原理。', image: 'https://picsum.photos/id/324/400/300', status: 'available', category: '计算机' },
      { id: 89, title: '《网络是怎样连接的》', author: '户根勤', isbn: '978-7-115-40427-2', description: '图解计算机网络基础知识。', image: 'https://picsum.photos/id/325/400/300', status: 'available', category: '计算机' },
      { id: 90, title: '《图解HTTP》', author: '上野宣', isbn: '978-7-115-40428-9', description: '图解HTTP协议原理。', image: 'https://picsum.photos/id/326/400/300', status: 'available', category: '计算机' },
      { id: 91, title: '《图解TCP/IP》', author: '竹下隆史', isbn: '978-7-115-40429-6', description: '图解TCP/IP协议原理。', image: 'https://picsum.photos/id/327/400/300', status: 'available', category: '计算机' },
      { id: 92, title: '《深入理解C++11》', author: 'M. Josuttis', isbn: '978-7-115-40430-2', description: 'C++11新特性的深入讲解。', image: 'https://picsum.photos/id/328/400/300', status: 'borrowed', category: '计算机' },
      { id: 93, title: '《Effective C++》', author: 'Scott Meyers', isbn: '978-7-111-21003-8', description: 'C++编程的55个经验。', image: 'https://picsum.photos/id/329/400/300', status: 'available', category: '计算机' },
      { id: 94, title: '《深入理解JVM虚拟机》', author: '周志明', isbn: '978-7-115-40431-9', description: 'Java虚拟机原理的深入剖析。', image: 'https://picsum.photos/id/330/400/300', status: 'available', category: '计算机' },
      { id: 95, title: '《Spring实战》', author: 'Craig Walls', isbn: '978-7-115-40432-6', description: 'Spring框架的实战指南。', image: 'https://picsum.photos/id/331/400/300', status: 'available', category: '计算机' },
      { id: 96, title: '《MyBatis从入门到精通》', author: '杨开振', isbn: '978-7-115-40433-3', description: 'MyBatis框架的入门与实践。', image: 'https://picsum.photos/id/332/400/300', status: 'available', category: '计算机' },
      { id: 97, title: '《Netty实战》', author: 'Norman Maurer', isbn: '978-7-115-40434-0', description: 'Netty高性能网络编程框架。', image: 'https://picsum.photos/id/333/400/300', status: 'available', category: '计算机' },
      { id: 98, title: '《Kafka权威指南》', author: 'Neha Narkhede', isbn: '978-7-115-40435-7', description: 'Kafka消息队列的权威指南。', image: 'https://picsum.photos/id/334/400/300', status: 'borrowed', category: '计算机' },
      { id: 99, title: '《Hadoop权威指南》', author: 'Tom White', isbn: '978-7-115-40436-4', description: 'Hadoop大数据平台的权威指南。', image: 'https://picsum.photos/id/335/400/300', status: 'available', category: '计算机' },
      { id: 100, title: '《Spark大数据处理》', author: 'Holden Karau', isbn: '978-7-115-40437-1', description: 'Spark大数据处理框架。', image: 'https://picsum.photos/id/336/400/300', status: 'available', category: '计算机' },
      { id: 101, title: '《TensorFlow实战Google深度学习框架》', author: '李嘉璇', isbn: '978-7-115-40438-8', description: 'TensorFlow深度学习框架的实战。', image: 'https://picsum.photos/id/337/400/300', status: 'available', category: '计算机' },
      { id: 102, title: '《Python机器学习》', author: 'Sebastian Raschka', isbn: '978-7-115-40439-5', description: 'Python机器学习实践。', image: 'https://picsum.photos/id/338/400/300', status: 'available', category: '计算机' },
      { id: 103, title: '《深度学习》', author: 'Ian Goodfellow', isbn: '978-7-115-40440-1', description: '深度学习的圣经。', image: 'https://picsum.photos/id/339/400/300', status: 'available', category: '计算机' },
      { id: 104, title: '《统计学习方法》', author: '李航', isbn: '978-7-115-40441-8', description: '机器学习的数学基础。', image: 'https://picsum.photos/id/340/400/300', status: 'borrowed', category: '科学' },
      { id: 105, title: '《高等数学》', author: '同济大学数学系', isbn: '978-7-04-000001-1', description: '经典大学数学教材。', image: 'https://picsum.photos/id/341/400/300', status: 'available', category: '科学' },
      { id: 106, title: '《线性代数》', author: '同济大学数学系', isbn: '978-7-04-000002-8', description: '经典线性代数教材。', image: 'https://picsum.photos/id/342/400/300', status: 'available', category: '科学' },
      { id: 107, title: '《概率论与数理统计》', author: '浙江大学数学系', isbn: '978-7-04-000003-5', description: '概率论与数理统计教材。', image: 'https://picsum.photos/id/343/400/300', status: 'available', category: '科学' },
      { id: 108, title: '《离散数学及其应用》', author: 'Kenneth Rosen', isbn: '978-7-111-21004-5', description: '离散数学的经典教材。', image: 'https://picsum.photos/id/344/400/300', status: 'available', category: '科学' },
      { id: 109, title: '《普通物理学》', author: '程守洙', isbn: '978-7-04-000004-2', description: '经典大学物理教材。', image: 'https://picsum.photos/id/345/400/300', status: 'borrowed', category: '科学' },
      { id: 110, title: '《化学原理》', author: 'Zumdal', isbn: '978-7-04-000005-9', description: '经典大学化学教材。', image: 'https://picsum.photos/id/346/400/300', status: 'available', category: '科学' },
      { id: 111, title: '《生物学》', author: 'Campbell', isbn: '978-7-04-000006-6', description: '经典大学生物学教材。', image: 'https://picsum.photos/id/347/400/300', status: 'available', category: '科学' },
      { id: 112, title: '《地球科学概论》', author: '王德滋', isbn: '978-7-04-000007-3', description: '地球科学的入门教材。', image: 'https://picsum.photos/id/348/400/300', status: 'available', category: '科学' },
      { id: 113, title: '《天文学概论》', author: '李竞', isbn: '978-7-04-000008-0', description: '天文学的入门教材。', image: 'https://picsum.photos/id/349/400/300', status: 'available', category: '科学' },
      { id: 114, title: '《中国近代史》', author: '蒋廷黻', isbn: '978-7-5404-3706-4', description: '简明扼要的中国近代史。', image: 'https://picsum.photos/id/350/400/300', status: 'borrowed', category: '历史' },
      { id: 115, title: '《全球通史》', author: 'L.S. 斯塔夫里阿诺斯', isbn: '978-7-5404-3707-1', description: '世界历史的经典巨著。', image: 'https://picsum.photos/id/351/400/300', status: 'available', category: '历史' },
      { id: 116, title: '《罗马帝国衰亡史》', author: '爱德华·吉本', isbn: '978-7-5404-3708-8', description: '经典史学巨著。', image: 'https://picsum.photos/id/352/400/300', status: 'available', category: '历史' },
      { id: 117, title: '《万历十五年》', author: '黄仁宇', isbn: '978-7-5404-3709-5', description: '以小见大的明朝历史分析。', image: 'https://picsum.photos/id/353/400/300', status: 'available', category: '历史' },
      { id: 118, title: '《史记》', author: '司马迁', isbn: '978-7-02-000223-5', description: '中国古代史学经典。', image: 'https://picsum.photos/id/354/400/300', status: 'available', category: '历史' },
      { id: 119, title: '《资治通鉴》', author: '司马光', isbn: '978-7-02-000224-2', description: '编年体通史巨著。', image: 'https://picsum.photos/id/355/400/300', status: 'borrowed', category: '历史' },
      { id: 120, title: '《三国演义》', author: '罗贯中', isbn: '978-7-02-000225-9', description: '中国古典四大名著之一。', image: 'https://picsum.photos/id/356/400/300', status: 'available', category: '文学' },
      { id: 121, title: '《水浒传》', author: '施耐庵', isbn: '978-7-02-000226-6', description: '中国古典四大名著之一。', image: 'https://picsum.photos/id/357/400/300', status: 'available', category: '文学' },
      { id: 122, title: '《西游记》', author: '吴承恩', isbn: '978-7-02-000227-3', description: '中国古典四大名著之一。', image: 'https://picsum.photos/id/358/400/300', status: 'available', category: '文学' },
      { id: 123, title: '《悲惨世界》', author: '维克多·雨果', isbn: '978-7-5327-7783-6', description: '法国文学的经典巨著。', image: 'https://picsum.photos/id/359/400/300', status: 'available', category: '文学' },
      { id: 124, title: '《战争与和平》', author: '列夫·托尔斯泰', isbn: '978-7-5327-7784-3', description: '俄国文学的巅峰之作。', image: 'https://picsum.photos/id/360/400/300', status: 'borrowed', category: '文学' },
      { id: 125, title: '《静静的顿河》', author: '米哈伊尔·肖洛霍夫', isbn: '978-7-5327-7785-0', description: '苏联文学的经典。', image: 'https://picsum.photos/id/361/400/300', status: 'available', category: '文学' },
      { id: 126, title: '《罪与罚》', author: '陀思妥耶夫斯基', isbn: '978-7-5327-7786-7', description: '俄国心理小说经典。', image: 'https://picsum.photos/id/362/400/300', status: 'available', category: '文学' },
      { id: 127, title: '《麦田里的守望者》', author: 'J.D.塞林格', isbn: '978-7-5447-0627-0', description: '美国文学的经典。', image: 'https://picsum.photos/id/363/400/300', status: 'available', category: '小说' },
      { id: 128, title: '《了不起的盖茨比》', author: 'F.斯科特·菲茨杰拉德', isbn: '978-7-5447-0628-7', description: '美国文学的经典小说。', image: 'https://picsum.photos/id/364/400/300', status: 'available', category: '小说' },
      { id: 129, title: '《挪威的森林》', author: '村上春树', isbn: '978-7-5327-7787-4', description: '日本文学的代表作。', image: 'https://picsum.photos/id/365/400/300', status: 'borrowed', category: '小说' },
      { id: 130, title: '《白夜行》', author: '东野圭吾', isbn: '978-7-5327-7788-1', description: '日本推理小说。', image: 'https://picsum.photos/id/366/400/300', status: 'available', category: '小说' },
      { id: 131, title: '《解忧杂货店》', author: '东野圭吾', isbn: '978-7-5327-7789-8', description: '日本温情小说。', image: 'https://picsum.photos/id/367/400/300', status: 'available', category: '小说' },
      { id: 132, title: '《明天的记忆》', author: '东野圭吾', isbn: '978-7-5327-7790-4', description: '日本科幻小说。', image: 'https://picsum.photos/id/368/400/300', status: 'available', category: '小说' },
      { id: 133, title: '《秘密》', author: '东野圭吾', isbn: '978-7-5327-7791-1', description: '日本奇幻小说。', image: 'https://picsum.photos/id/369/400/300', status: 'available', category: '小说' },
      { id: 134, title: '《恶意》', author: '东野圭吾', isbn: '978-7-5327-7792-8', description: '日本悬疑小说。', image: 'https://picsum.photos/id/370/400/300', status: 'borrowed', category: '小说' },
      { id: 135, title: '《彷徨》', author: '鲁迅', isbn: '978-7-02-000228-0', description: '鲁迅短篇小说集。', image: 'https://picsum.photos/id/371/400/300', status: 'available', category: '文学' },
      { id: 136, title: '《呐喊》', author: '鲁迅', isbn: '978-7-02-000229-7', description: '鲁迅短篇小说集。', image: 'https://picsum.photos/id/372/400/300', status: 'available', category: '文学' },
      { id: 137, title: '《朝花夕拾》', author: '鲁迅', isbn: '978-7-02-000230-3', description: '鲁迅散文集。', image: 'https://picsum.photos/id/373/400/300', status: 'available', category: '文学' },
      { id: 138, title: '《狂人日记》', author: '鲁迅', isbn: '978-7-02-000231-0', description: '鲁迅小说代表作。', image: 'https://picsum.photos/id/374/400/300', status: 'available', category: '文学' },
      { id: 139, title: '《骆驼祥子》', author: '老舍', isbn: '978-7-5327-7793-5', description: '老舍小说代表作。', image: 'https://picsum.photos/id/375/400/300', status: 'borrowed', category: '文学' },
      { id: 140, title: '《雷雨》', author: '曹禺', isbn: '978-7-5327-7794-2', description: '曹禺话剧代表作。', image: 'https://picsum.photos/id/376/400/300', status: 'available', category: '文学' },
      { id: 141, title: '《茶馆》', author: '老舍', isbn: '978-7-5327-7795-9', description: '老舍话剧代表作。', image: 'https://picsum.photos/id/377/400/300', status: 'available', category: '文学' },
      { id: 142, title: '《边城》', author: '沈从文', isbn: '978-7-5327-7796-6', description: '沈从文小说代表作。', image: 'https://picsum.photos/id/378/400/300', status: 'available', category: '文学' },
      { id: 143, title: '《平凡的世界》', author: '路遥', isbn: '978-7-5327-7797-3', description: '路遥长篇小说代表作。', image: 'https://picsum.photos/id/379/400/300', status: 'available', category: '小说' },
      { id: 144, title: '《白鹿原》', author: '陈忠实', isbn: '978-7-5327-7798-0', description: '陈忠实长篇小说代表作。', image: 'https://picsum.photos/id/380/400/300', status: 'borrowed', category: '小说' },
      { id: 145, title: '《许三观卖血记》', author: '余华', isbn: '978-7-5327-7799-7', description: '余华小说代表作。', image: 'https://picsum.photos/id/381/400/300', status: 'available', category: '文学' },
      { id: 146, title: '《兄弟》', author: '余华', isbn: '978-7-5327-7800-0', description: '余华长篇小说。', image: 'https://picsum.photos/id/382/400/300', status: 'available', category: '文学' },
      { id: 147, title: '《我们仨》', author: '杨绛', isbn: '978-7-5327-7801-7', description: '杨绛回忆散文。', image: 'https://picsum.photos/id/383/400/300', status: 'available', category: '文学' },
      { id: 148, title: '《傅雷家书》', author: '傅雷', isbn: '978-7-5327-7802-4', description: '傅雷与儿子傅聪的家书集。', image: 'https://picsum.photos/id/384/400/300', status: 'available', category: '文学' },
      { id: 149, title: '《平凡的谎言》', author: '史蒂芬·金', isbn: '978-7-5327-7803-1', description: '史蒂芬·金短篇小说集。', image: 'https://picsum.photos/id/385/400/300', status: 'borrowed', category: '小说' },
      { id: 150, title: '《肖申克的救赎》', author: '史蒂芬·金', isbn: '978-7-5447-0629-4', description: '史蒂芬·金中篇小说。', image: 'https://picsum.photos/id/386/400/300', status: 'available', category: '小说' },
      { id: 151, title: '《绿里奇迹》', author: '史蒂芬·金', isbn: '978-7-5447-0630-0', description: '史蒂芬·金小说。', image: 'https://picsum.photos/id/387/400/300', status: 'available', category: '小说' },
      { id: 152, title: '《达芬奇密码》', author: '丹·布朗', isbn: '978-7-5447-0631-7', description: '丹·布朗悬疑小说。', image: 'https://picsum.photos/id/388/400/300', status: 'available', category: '小说' },
      { id: 153, title: '《天使与魔鬼》', author: '丹·布朗', isbn: '978-7-5447-0632-4', description: '丹·布朗悬疑小说。', image: 'https://picsum.photos/id/389/400/300', status: 'available', category: '小说' },
      { id: 154, title: '《地狱》', author: '丹·布朗', isbn: '978-7-5447-0633-1', description: '丹·布朗悬疑小说。', image: 'https://picsum.photos/id/390/400/300', status: 'borrowed', category: '小说' },
      { id: 155, title: '《起源》', author: '丹·布朗', isbn: '978-7-5447-0634-8', description: '丹·布朗悬疑小说。', image: 'https://picsum.photos/id/391/400/300', status: 'available', category: '小说' },
      { id: 156, title: '《大侦探福尔摩斯全集》', author: '阿瑟·柯南·道尔', isbn: '978-7-5447-0635-5', description: '经典侦探小说。', image: 'https://picsum.photos/id/392/400/300', status: 'available', category: '小说' },
      { id: 157, title: '《阿加莎·克里斯蒂侦探小说集》', author: '阿加莎·克里斯蒂', isbn: '978-7-5447-0636-2', description: '经典侦探小说。', image: 'https://picsum.photos/id/393/400/300', status: 'available', category: '小说' },
      { id: 158, title: '《福尔摩斯探案全集》', author: '阿瑟·柯南·道尔', isbn: '978-7-5447-0637-9', description: '经典侦探小说。', image: 'https://picsum.photos/id/394/400/300', status: 'available', category: '小说' },
      { id: 159, title: '《东方快车谋杀案》', author: '阿加莎·克里斯蒂', isbn: '978-7-5447-0638-6', description: '经典推理小说。', image: 'https://picsum.photos/id/395/400/300', status: 'borrowed', category: '小说' },
      { id: 160, title: '《无人生还》', author: '阿加莎·克里斯蒂', isbn: '978-7-5447-0639-3', description: '经典推理小说。', image: 'https://picsum.photos/id/396/400/300', status: 'available', category: '小说' },
      { id: 161, title: '《罗生门》', author: '芥川龙之介', isbn: '978-7-5327-7804-8', description: '日本经典短篇小说集。', image: 'https://picsum.photos/id/397/400/300', status: 'available', category: '文学' },
      { id: 162, title: '《人间失格》', author: '太宰治', isbn: '978-7-5327-7805-5', description: '日本经典小说。', image: 'https://picsum.photos/id/398/400/300', status: 'available', category: '文学' },
      { id: 163, title: '《雪国》', author: '川端康成', isbn: '978-7-5327-7806-2', description: '日本经典小说。', image: 'https://picsum.photos/id/399/400/300', status: 'available', category: '文学' },
      { id: 164, title: '《心》', author: '夏目漱石', isbn: '978-7-5327-7807-9', description: '日本经典小说。', image: 'https://picsum.photos/id/400/400/300', status: 'borrowed', category: '文学' },
      { id: 165, title: '《局外人》', author: '阿尔贝·加缪', isbn: '978-7-5327-7808-6', description: '存在主义文学经典。', image: 'https://picsum.photos/id/401/400/300', status: 'available', category: '文学' },
      { id: 166, title: '《鼠疫》', author: '阿尔贝·加缪', isbn: '978-7-5327-7809-3', description: '存在主义文学经典。', image: 'https://picsum.photos/id/402/400/300', status: 'available', category: '文学' },
      { id: 167, title: '《西西弗斯神话》', author: '阿尔贝·加缪', isbn: '978-7-5327-7810-9', description: '存在主义哲学经典。', image: 'https://picsum.photos/id/403/400/300', status: 'available', category: '哲学' },
      { id: 168, title: '《存在与时间》', author: '马丁·海德格尔', isbn: '978-7-5327-7811-6', description: '存在主义哲学经典。', image: 'https://picsum.photos/id/404/400/300', status: 'available', category: '哲学' },
      { id: 169, title: '《查拉图斯特拉如是说》', author: '弗里德里希·尼采', isbn: '978-7-5327-7812-3', description: '尼采哲学经典。', image: 'https://picsum.photos/id/405/400/300', status: 'borrowed', category: '哲学' },
      { id: 170, title: '《悲剧的诞生》', author: '弗里德里希·尼采', isbn: '978-7-5327-7813-0', description: '尼采哲学经典。', image: 'https://picsum.photos/id/406/400/300', status: 'available', category: '哲学' },
      { id: 171, title: '《哲学的故事》', author: '威尔·杜兰', isbn: '978-7-5327-7814-7', description: '哲学入门读物。', image: 'https://picsum.photos/id/407/400/300', status: 'available', category: '哲学' },
      { id: 172, title: '《西方哲学史讲演录》', author: '黑格尔', isbn: '978-7-5327-7815-4', description: '黑格尔哲学经典。', image: 'https://picsum.photos/id/408/400/300', status: 'available', category: '哲学' },
      { id: 173, title: '《纯粹理性批判》', author: '伊曼努尔·康德', isbn: '978-7-5327-7816-1', description: '康德哲学经典。', image: 'https://picsum.photos/id/409/400/300', status: 'available', category: '哲学' },
      { id: 174, title: '《小逻辑》', author: '黑格尔', isbn: '978-7-5327-7817-8', description: '黑格尔哲学入门。', image: 'https://picsum.photos/id/410/400/300', status: 'borrowed', category: '哲学' },
      { id: 175, title: '《论自由》', author: '约翰·密尔', isbn: '978-7-5327-7818-5', description: '政治哲学经典。', image: 'https://picsum.photos/id/411/400/300', status: 'available', category: '哲学' },
      { id: 176, title: '《君主论》', author: '马基雅维利', isbn: '978-7-5327-7819-2', description: '政治哲学经典。', image: 'https://picsum.photos/id/412/400/300', status: 'available', category: '哲学' },
      { id: 177, title: '《利维坦》', author: '托马斯·霍布斯', isbn: '978-7-5327-7820-8', description: '政治哲学经典。', image: 'https://picsum.photos/id/413/400/300', status: 'available', category: '哲学' },
      { id: 178, title: '《社会契约论》', author: '让-雅克·卢梭', isbn: '978-7-5327-7821-5', description: '政治哲学经典。', image: 'https://picsum.photos/id/414/400/300', status: 'available', category: '哲学' },
      { id: 179, title: '《资本论》', author: '卡尔·马克思', isbn: '978-7-5327-7822-2', description: '经济学和哲学经典。', image: 'https://picsum.photos/id/415/400/300', status: 'borrowed', category: '哲学' },
      { id: 180, title: '《全球化：一部历史》', author: '彼得·伯克', isbn: '978-7-5404-3710-1', description: '全球化历史研究。', image: 'https://picsum.photos/id/416/400/300', status: 'available', category: '历史' },
      { id: 181, title: '《历史的观念》', author: 'R.G.科林伍德', isbn: '978-7-5404-3711-8', description: '历史哲学经典。', image: 'https://picsum.photos/id/417/400/300', status: 'available', category: '历史' },
      { id: 182, title: '《历史是什么》', author: 'E.H.卡尔', isbn: '978-7-5404-3712-5', description: '历史理论经典。', image: 'https://picsum.photos/id/418/400/300', status: 'available', category: '历史' },
      { id: 183, title: '《菊次郎的夏天》', author: '北野武', isbn: '978-7-5447-0640-9', description: '日本电影剧本。', image: 'https://picsum.photos/id/419/400/300', status: 'available', category: '艺术' },
      { id: 184, title: '《百年电影》', author: '马丁·斯科塞斯', isbn: '978-7-5447-0641-6', description: '电影史概览。', image: 'https://picsum.photos/id/420/400/300', status: 'borrowed', category: '艺术' },
      { id: 185, title: '《认识电影》', author: '路易斯·贾内蒂', isbn: '978-7-5447-0642-3', description: '电影艺术入门。', image: 'https://picsum.photos/id/421/400/300', status: 'available', category: '艺术' },
      { id: 186, title: '《电影的艺术》', author: '大卫·波德维尔', isbn: '978-7-5447-0643-0', description: '电影理论经典。', image: 'https://picsum.photos/id/422/400/300', status: 'available', category: '艺术' },
      { id: 187, title: '《西方美术史》', author: '马尔科姆·阿基博尔德', isbn: '978-7-5327-7823-9', description: '西方美术史入门。', image: 'https://picsum.photos/id/423/400/300', status: 'available', category: '艺术' },
      { id: 188, title: '《中国美术史》', author: '王伯敏', isbn: '978-7-5327-7824-6', description: '中国美术史入门。', image: 'https://picsum.photos/id/424/400/300', status: 'available', category: '艺术' },
      { id: 189, title: '《艺术概论》', author: '彭吉象', isbn: '978-7-5327-7825-3', description: '艺术理论入门。', image: 'https://picsum.photos/id/425/400/300', status: 'borrowed', category: '艺术' },
      { id: 190, title: '《设计心理学》', author: '唐纳德·A·诺曼', isbn: '978-7-5086-4531-9', description: '设计与心理学结合。', image: 'https://picsum.photos/id/426/400/300', status: 'available', category: '心理学' },
      { id: 191, title: '《决策与判断》', author: '斯科特·普劳斯', isbn: '978-7-5086-5870-8', description: '决策心理学。', image: 'https://picsum.photos/id/427/400/300', status: 'available', category: '心理学' },
      { id: 192, title: '《思考，快与慢》', author: '丹尼尔·卡尼曼', isbn: '978-7-5086-5871-5', description: '行为经济学经典。', image: 'https://picsum.photos/id/428/400/300', status: 'available', category: '心理学' },
      { id: 193, title: '《影响力2》', author: '罗伯特·西奥迪尼', isbn: '978-7-5086-5872-2', description: '影响力续集。', image: 'https://picsum.photos/id/429/400/300', status: 'available', category: '心理学' },
      { id: 194, title: '《情商》', author: '丹尼尔·戈尔曼', isbn: '978-7-5086-4532-6', description: '情商理论。', image: 'https://picsum.photos/id/430/400/300', status: 'borrowed', category: '心理学' },
      { id: 195, title: '《怪诞行为学》', author: '丹·艾瑞里', isbn: '978-7-5086-5873-9', description: '行为经济学。', image: 'https://picsum.photos/id/431/400/300', status: 'available', category: '心理学' },
      { id: 196, title: '《拖延心理学》', author: '简·博克', isbn: '978-7-5086-5874-6', description: '拖延症心理分析。', image: 'https://picsum.photos/id/432/400/300', status: 'available', category: '心理学' },
      { id: 197, title: '《原生家庭》', author: '苏珊·福沃德', isbn: '978-7-5086-5875-3', description: '原生家庭对人的影响。', image: 'https://picsum.photos/id/433/400/300', status: 'available', category: '心理学' },
      { id: 198, title: '《被讨厌的勇气》', author: '岸见一郎', isbn: '978-7-5086-5876-0', description: '阿德勒心理学入门。', image: 'https://picsum.photos/id/434/400/300', status: 'available', category: '心理学' },
      { id: 199, title: '《精力管理》', author: '吉姆·洛尔', isbn: '978-7-5086-5877-7', description: '高效精力管理。', image: 'https://picsum.photos/id/435/400/300', status: 'available', category: '心理学' },
      { id: 200, title: '《掌控习惯》', author: '詹姆斯·克利尔', isbn: '978-7-5086-5878-4', description: '习惯养成方法。', image: 'https://picsum.photos/id/436/400/300', status: 'borrowed', category: '心理学' }
    ];
    document.addEventListener('DOMContentLoaded', function() {
        function getMasterBookList() {
            let storedBooks = localStorage.getItem('books');
            if (!storedBooks) {
                localStorage.setItem('books', JSON.stringify(books));
                return books;
            }
            return JSON.parse(storedBooks);
        }

        const masterBooks = getMasterBookList();
        const currentUser = sessionStorage.getItem('currentUser');
        if (!currentUser) return;

        const users = JSON.parse(localStorage.getItem('users')) || [];
        const userInfo = users.find(u => u.username === currentUser);

        if (userInfo) {
            document.getElementById('user-name-display').textContent = userInfo.name;
            document.getElementById('user-role-display').textContent = userInfo.role;
        }

        const bookListContainer = document.getElementById('book-list-container');
        const searchInput = document.getElementById('search-input');
        const categorySelect = document.getElementById('category-select');
        const searchButton = document.getElementById('search-button');

        let collections = JSON.parse(localStorage.getItem(`collections_${currentUser}`)) || [];
        let borrowings = JSON.parse(localStorage.getItem(`borrowings_${currentUser}`)) || [];

        function isBookAlreadyBorrowed(bookId) {
            const allUsers = JSON.parse(localStorage.getItem('users')) || [];
            for (const user of allUsers) {
                const userBorrowings = JSON.parse(localStorage.getItem(`borrowings_${user.username}`)) || [];
                if (userBorrowings.some(book => book.id === bookId)) {
                    return true;
                }
            }
            return false;
        }

        function renderBooks(filteredBooks) {
            bookListContainer.innerHTML = '';
            filteredBooks.forEach(book => {
                const isCollected = collections.some(b => b.id === book.id);
                const isBorrowedByCurrentUser = borrowings.some(b => b.id === book.id);
                const isBorrowedByAnyone = isBookAlreadyBorrowed(book.id);

                let borrowButtonText = '借阅';
                let borrowButtonDisabled = '';
                let borrowButtonClass = 'btn-primary';

                if (isBorrowedByAnyone) {
                    borrowButtonDisabled = 'disabled';
                    borrowButtonClass = 'btn-secondary';
                    if (isBorrowedByCurrentUser) {
                        borrowButtonText = '已借阅';
                    } else {
                        borrowButtonText = '已被借出';
                    }
                }

                // ### MODIFIED CARD TEMPLATE TO INCLUDE AI BUTTON ###
                const card = `
                    <div class="bg-white rounded-xl shadow-md overflow-hidden card-hover flex flex-col">
                        <img src="${book.image}" alt="${book.title}" class="w-full h-48 object-cover">
                        <div class="p-4 flex flex-col flex-grow">
                            <div class="flex-grow">
                                <h3 class="text-lg font-bold truncate">${book.title}</h3>
                                <p class="text-sm text-gray-600 dark:text-gray-400 mb-2">${book.author}</p>
                                <p class="text-xs text-gray-500 dark:text-gray-500 h-10 overflow-hidden">${book.description}</p>
                            </div>
                            <div class="mt-4 space-y-2">
                                <div class="flex justify-between items-center">
                                    <button class="${borrowButtonClass} borrow-btn" data-book-id="${book.id}" ${borrowButtonDisabled}>
                                        ${borrowButtonText}
                                    </button>
                                    <button class="collect-btn text-2xl ${isCollected ? 'text-yellow-500' : 'text-gray-400'}" data-book-id="${book.id}">
                                        <i class="fa ${isCollected ? 'fa-star' : 'fa-star-o'}"></i>
                                    </button>
                                </div>
                                <div class="flex justify-between items-center">
                                    <button class="btn-outline-primary" onclick="window.open('https://www.baidu.com/s?wd=${encodeURIComponent(book.title)}', '_blank')">
                                        查看详情
                                    </button>
                                    <button class="btn-ai ai-chat-open-btn" data-book-id="${book.id}">
                                        <i class="fa fa-comments-o"></i> 询问AI
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                bookListContainer.innerHTML += card;
            });
            addEventListeners();
        }
        
        function addEventListeners() {
            document.querySelectorAll('.borrow-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const bookId = parseInt(this.getAttribute('data-book-id'));
                    borrowBook(bookId);
                });
            });

            document.querySelectorAll('.collect-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const bookId = parseInt(this.getAttribute('data-book-id'));
                    toggleCollection(bookId);
                });
            });

            // --- AI Chat Logic Start ---
            // Add event listeners for the new AI buttons
            document.querySelectorAll('.ai-chat-open-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const bookId = parseInt(this.getAttribute('data-book-id'));
                    openAiChat(bookId);
                });
            });
            // --- AI Chat Logic End ---
        }
        
        // Original borrowBook function (modified slightly for history)
        function borrowBook(bookId) {
            if (isBookAlreadyBorrowed(bookId)) {
                alert('抱歉，这本书已经被其他用户借阅了。');
                return;
            }
            const book = masterBooks.find(b => b.id === bookId);
            if (book) {
                const borrowDate = new Date();
                const dueDate = new Date();
                dueDate.setDate(borrowDate.getDate() + 30);
                const borrowedBook = { ...book, borrowDate: borrowDate.toLocaleDateString(), dueDate: dueDate.toLocaleDateString() };
                borrowings.push(borrowedBook);
                localStorage.setItem(`borrowings_${currentUser}`, JSON.stringify(borrowings));

                let history = JSON.parse(localStorage.getItem(`borrowing_history_${currentUser}`)) || [];
                const historyRecord = { ...borrowedBook, status: '借阅中', returnDate: null };
                history.push(historyRecord);
                localStorage.setItem(`borrowing_history_${currentUser}`, JSON.stringify(history));
                
                alert(`《${book.title}》借阅成功！`);
                filterBooks();
            }
        }
        
        function toggleCollection(bookId) {
            const bookIndex = collections.findIndex(b => b.id === bookId);
            const book = masterBooks.find(b => b.id === bookId);
            if (bookIndex > -1) {
                collections.splice(bookIndex, 1);
                 alert(`《${book.title}》已从收藏中移除！`);
            } else {
                collections.push(book);
                alert(`《${book.title}》已添加到收藏！`);
            }
            localStorage.setItem(`collections_${currentUser}`, JSON.stringify(collections));
            filterBooks();
        }

        function filterBooks() {
            const searchTerm = searchInput.value.toLowerCase();
            const category = categorySelect.value;
            const filtered = masterBooks.filter(book => {
                const matchesSearch = book.title.toLowerCase().includes(searchTerm) || book.author.toLowerCase().includes(searchTerm);
                const matchesCategory = category === '所有分类' || book.category === category;
                return matchesSearch && matchesCategory;
            });
            renderBooks(filtered);
        }

        searchButton.addEventListener('click', filterBooks);
        searchInput.addEventListener('input', filterBooks);
        categorySelect.addEventListener('change', filterBooks);
        
        document.getElementById('logout-btn').addEventListener('click', () => {
            sessionStorage.removeItem('currentUser');
            alert('您已成功登出！');
            window.location.href = 'login.html';
        });
        
        const sidebarToggle = document.getElementById('sidebar-toggle');
        const sidebar = document.getElementById('sidebar');
        sidebarToggle.addEventListener('click', () => {
            sidebar.classList.toggle('-translate-x-full');
        });

        // --- AI Chat Logic Start ---
        const aiChatDialog = document.getElementById('ai-chat-dialog');
        const aiChatTitle = document.getElementById('ai-chat-title');
        const aiChatMessages = document.getElementById('ai-chat-messages');
        const aiChatInput = document.getElementById('ai-chat-input');
        const aiChatSendBtn = document.getElementById('ai-chat-send-btn');
        const aiChatCloseBtn = document.getElementById('ai-chat-close-btn');
        
        let currentBookForAI = null;

        function openAiChat(bookId) {
            currentBookForAI = masterBooks.find(b => b.id === bookId);
            if (!currentBookForAI) return;

            aiChatTitle.textContent = `关于 ${currentBookForAI.title}`;
            aiChatMessages.innerHTML = ''; // Clear previous messages
            aiChatInput.value = '';

            displayAiMessage(`你好！有什么可以帮助你了解《${currentBookForAI.title}》这本书吗？你可以问我关于它的作者、简介或ISBN。`);
            aiChatDialog.classList.remove('hidden');
        }
        
        function closeAiChat() {
            aiChatDialog.classList.add('hidden');
            currentBookForAI = null;
        }

        function displayUserMessage(text) {
            const messageEl = document.createElement('div');
            messageEl.className = 'flex justify-end';
            messageEl.innerHTML = `<div class="bg-primary text-white p-2 rounded-lg max-w-xs">${text}</div>`;
            aiChatMessages.appendChild(messageEl);
            aiChatMessages.scrollTop = aiChatMessages.scrollHeight;
        }

        function displayAiMessage(text) {
            const messageEl = document.createElement('div');
            messageEl.className = 'flex justify-start';
            messageEl.innerHTML = `<div class="bg-gray-200 dark:bg-gray-700 p-2 rounded-lg max-w-xs">${text}</div>`;
            aiChatMessages.appendChild(messageEl);
            aiChatMessages.scrollTop = aiChatMessages.scrollHeight;
        }

       async function generateAiResponse() {
        const query = aiChatInput.value.trim();
        if (query === '' || !currentBookForAI) return;

        displayUserMessage(aiChatInput.value);
        aiChatInput.value = '';

        // 显示一个"思考中"的提示，提升用户体验
        const thinkingMessage = document.createElement('div');
        thinkingMessage.className = 'flex justify-start thinking-indicator';
        thinkingMessage.innerHTML = `<div class="bg-gray-200 dark:bg-gray-700 p-2 rounded-lg max-w-xs"><i class="fa fa-spinner fa-spin"></i> 思考中...</div>`;
        aiChatMessages.appendChild(thinkingMessage);
        aiChatMessages.scrollTop = aiChatMessages.scrollHeight;

        try {
            // 调用我们的后端服务器
            const response = await fetch('http://localhost:3000/api/ask-ai', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    query: query,
                    book: currentBookForAI // 将当前的书籍信息一起发送
                }),
            });

            if (!response.ok) {
                throw new Error('Server returned an error.');
            }

            const data = await response.json();
            
            // 移除"思考中"的提示
            aiChatMessages.querySelector('.thinking-indicator').remove();
            
            // 显示真正的AI回答
            displayAiMessage(data.reply);

        } catch (error) {
            console.error('Error fetching AI response:', error);
            // 移除"思考中"的提示
            aiChatMessages.querySelector('.thinking-indicator').remove();
            // 显示错误信息
            displayAiMessage('抱歉，AI服务当前似乎出了点问题，请稍后再试。');
        }
    }
        aiChatSendBtn.addEventListener('click', generateAiResponse);
        aiChatInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                generateAiResponse();
            }
        });
        aiChatCloseBtn.addEventListener('click', closeAiChat);
        // --- AI Chat Logic End ---

        filterBooks();
        
        // Background slideshow logic remains the same
        const backgroundImages = ['images/background1.jpg', 'images/background2.jpg', 'images/background3.jpg'];
        const backgroundSlideshow = document.getElementById('background-slideshow');
        if (backgroundSlideshow) {
            backgroundSlideshow.style.backgroundImage = `url('${backgroundImages[0]}')`;
            let currentImageIndex = 0;
            function changeBackgroundImage() {
                currentImageIndex = (currentImageIndex + 1) % backgroundImages.length;
                backgroundSlideshow.style.backgroundImage = `url('${backgroundImages[currentImageIndex]}')`;
            }
            if (backgroundImages.length > 1) {
                setInterval(changeBackgroundImage, 15000);
            }
        }
    });
  </script>
  <script>
    // The translation script remains unchanged.
    // ...
</script>
</body>
</html>